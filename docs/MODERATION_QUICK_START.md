# Dreamstream Moderation System - Quick Start Guide\n\n## üöÄ Getting Started\n\nThe moderation system is fully implemented and ready to use. Here's how to get started:\n\n---\n\n## üìã For Users: How to Report a Dream\n\n### Step-by-Step\n\n1. **Navigate to Dream Stream**\n   - Go to `/community` or click \"Dream Stream\" button\n   - Browse dreams in different territories\n\n2. **Find Inappropriate Content**\n   - Look for any dream that violates guidelines\n\n3. **Click the Report Button**\n   - Look for the üö© (Flag) icon in the dream card footer\n   - Button appears on mobile and desktop\n\n4. **Fill Out Report Form**\n   - Select a reason from dropdown:\n     - Explicit Sexual Content\n     - Harassment or Bullying\n     - Spam or Fake Content\n     - Illegal Activity\n     - False Information\n     - Other (explain in details)\n\n5. **Add Optional Details**\n   - Write why this dream violates guidelines\n   - Be specific about which part concerns you\n   - Max 500 characters\n\n6. **Submit Report**\n   - Click \"Submit Report\" button\n   - See success notification\n   - Your identity is protected!\n\n### Important Notes\n\n‚úÖ **Your Privacy**\n- Your user ID is anonymized (SHA-256 hash)\n- Dream authors can never know who reported them\n- Admins only see a hash, not your real ID\n\n‚úÖ **Prevent Duplicates**\n- You can only report each dream once\n- If you try again, you'll see \"Already reported\"\n\n‚úÖ **Moderation Quality**\n- Provide clear reasons for better action\n- Be honest - false reports are tracked\n- Our team reviews all reports promptly\n\n---\n\n## üë®‚Äçüíº For Admins: How to Moderate\n\n### Accessing the Moderation Queue\n\n1. **Navigate to Admin Panel**\n   - Click \"Admin Panel\" button (shield icon)\n   - Only visible if you have admin role\n\n2. **Click \"Moderation\" in Sidebar**\n   - See overview statistics\n   - View all pending reports\n   - Filter by status (pending, reviewed, all)\n\n### Reviewing a Report\n\n1. **Select a Report from the List**\n   - Click any report in the left panel\n   - Left panel shows all reports\n   - Sorted by date (newest first)\n\n2. **Review Report Details**\n   - See report reason (explicit, harassment, etc.)\n   - Read reporter's optional details\n   - Note: Reporter ID is anonymized (hash only)\n\n3. **View Dream Content**\n   - Full dream title and description\n   - Dream image if available\n   - Dream author status (anonymous or identified)\n   - Related reports count\n\n### Taking Action\n\n1. **Choose Action Type**\n   - **Dismiss Report** - No violation, keep dream active\n   - **Warn Author** - Notify author, dream stays visible\n   - **Hide from Feed** - Remove from public feed, author can still see\n   - **Remove Permanently** - Delete dream from Dreamstream\n\n2. **Provide Reason (Required)**\n   - Explain why you're taking this action\n   - This goes in the audit trail\n   - Required for compliance\n\n3. **Click Action Button**\n   - See success notification\n   - Dream status changes immediately\n   - Report marked as 'actioned'\n   - Audit trail entry created\n\n### Viewing Related Reports\n\n- If multiple reports on same dream\n- See all related reports in review panel\n- Shows reason and date for each\n- Helps identify patterns\n\n---\n\n## üìä Viewing Audit Trail\n\n### Access Audit Trail\n\n1. **Click \"Audit Trail\" in Sidebar**\n2. **See Complete Moderation History**\n   - All actions ever taken\n   - Timestamp for each action\n   - Moderator name\n   - Reason for action\n\n### Filter & Search\n\n- **By Action Type**\n  - Dismiss Report\n  - Warn Author\n  - Hide from Feed\n  - Remove\n\n- **By Dream Title**\n  - Search by partial name\n  - Real-time filtering\n\n### Export for Compliance\n\n- **Click \"Export CSV\"**\n- Downloads audit trail as CSV\n- Includes all action details\n- Sortable in Excel/Google Sheets\n- Perfect for compliance audits\n\n---\n\n## üìà Dashboard Statistics\n\n### Real-Time Metrics\n\nOn Moderation Queue page, you see:\n\n- **Pending Reports** (Red) - Awaiting review\n- **Under Review** (Orange) - Auto-flagged (3+ reports)\n- **Hidden** (Yellow) - Removed from feed\n- **Removed** (Dark Red) - Permanently deleted\n- **Total Reports** (Gray) - All-time count\n\n### Auto-Moderation Triggers\n\n- Dream auto-marked \"under_review\" after 3 reports\n- Content flags provide severity score\n- Helps prioritize high-severity content\n\n---\n\n## üîí Privacy & Anonymity\n\n### How Reporter Anonymity Works\n\n1. **User clicks Report**\n   - User ID captured: `user_abc123`\n\n2. **ID Gets Hashed**\n   - SHA-256 hash created: `a4f5c8d9e...` (irreversible)\n   - Salt added for extra security\n\n3. **Hash Stored**\n   - Only hash stored in database\n   - Real user ID never saved\n   - Original user ID discarded\n\n4. **Admin Reviews**\n   - Admin sees hash, not real ID\n   - Cannot reverse hash to find user\n   - No way to identify reporter\n\n5. **Author Notified**\n   - Generic message (no reporter info)\n   - Just reason for action\n   - Can't discover who reported\n\n### Security Guarantees\n\n‚úÖ Reporter ID is hashed with SHA-256 (irreversible)\n‚úÖ No raw user IDs in reports table\n‚úÖ Admin UI only shows hash\n‚úÖ Audit trail never includes reporter ID\n‚úÖ Author notifications generic\n‚úÖ Multiple layers of protection\n‚úÖ No fallback ways to identify reporter\n\n---\n\n## ‚öôÔ∏è Configuration\n\n### Optional: Set Custom Salt\n\nFor additional security, set a custom salt in your environment:\n\n```bash\n# .env.local\nVITE_APP_SALT=your-unique-salt-string\n```\n\nThis salt is added to user ID before hashing, making rainbow table attacks harder.\n\n### Database Setup\n\nBefore first use, ensure tables exist:\n\n```bash\n# Run migration in database\n# See scripts/create-moderation-tables.sql\n```\n\nOr via SDK:\n\n```typescript\nimport { blink } from './blink/client'\n\n// Creates tables if they don't exist\nawait blink.db.sql(`CREATE TABLE IF NOT EXISTS community_reports (...)`)\nawait blink.db.sql(`CREATE TABLE IF NOT EXISTS moderation_actions (...)`)\n```\n\n---\n\n## üß™ Testing the System\n\n### Test Report Submission\n\n```typescript\nimport { reportDream } from './utils/reportingService'\n\n// As a user\nconst result = await reportDream(\n  dreamId: 'dream_123',\n  reason: 'harassment',\n  details: 'This dream contains threatening language'\n)\n\nif (result.success) {\n  console.log('Report submitted:', result.reportId)\n} else {\n  console.error('Report failed:', result.error)\n}\n```\n\n### Test Moderation Action\n\n```typescript\nimport { takeModerationAction } from './utils/moderationService'\n\n// As an admin\nconst result = await takeModerationAction(\n  dreamId: 'dream_123',\n  actionType: 'hide',\n  actionReason: 'Contains harassment as reported by community',\n  reportIds: ['rep_456', 'rep_789']\n)\n\nif (result.success) {\n  console.log('Action applied:', result.actionId)\n}\n```\n\n### Check Audit Trail\n\n```typescript\nimport { getAuditTrail } from './utils/moderationService'\n\nconst actions = await getAuditTrail(limit: 50, offset: 0)\n\nactions.forEach(action => {\n  console.log(`${action.created_at}: ${action.action_type} by ${action.moderator_name}`)\n  console.log(`  Reason: ${action.action_reason}`)\n})\n```\n\n---\n\n## ‚ùì FAQs\n\n### Q: Can I report someone's dream?\n**A:** Yes! Click the flag icon on any dream. You can report explicit content, harassment, spam, illegal activity, misinformation, or other violations.\n\n### Q: Will the dream author know I reported them?\n**A:** No. Your identity is completely hidden. The author only receives a generic notification about the moderation action.\n\n### Q: How long does moderation take?\n**A:** Our team reviews reports promptly. High-severity reports (explicit, harassment) are prioritized.\n\n### Q: What if I report something by mistake?\n**A:** We track report accuracy. If you make false reports repeatedly, we may limit your reporting privileges.\n\n### Q: Can I see who reported a dream?\n**A:** No. Report identities are anonymized even from admins. Admins only see a hash of the reporter's ID.\n\n### Q: What happens when a dream is hidden?\n**A:** The dream is removed from the public feed but the author can still see it in their library. They receive a notification explaining why.\n\n### Q: What happens when a dream is removed?\n**A:** The dream is permanently deleted from Dreamstream. The author is notified of the removal.\n\n### Q: Can I appeal a moderation decision?\n**A:** Currently, moderation decisions are final. In future versions, we may add an appeal system.\n\n### Q: Is my report private?\n**A:** Yes. Your report is private and only visible to moderators. The reporter's identity is anonymized.\n\n---\n\n## üîó Useful Links\n\n- **For Users**: [Community Guidelines](#) (Coming Soon)\n- **For Admins**: [MODERATION_SYSTEM_IMPLEMENTATION_SUMMARY.md](/MODERATION_SYSTEM_IMPLEMENTATION_SUMMARY.md)\n- **Database Schema**: [scripts/create-moderation-tables.sql](/scripts/create-moderation-tables.sql)\n- **Type Definitions**: [src/types/moderation.ts](/src/types/moderation.ts)\n\n---\n\n## üìû Need Help?\n\n### For Users Reporting Content\n- Use clear, specific language\n- Explain which part violates guidelines\n- Provide context if needed\n\n### For Admins Moderating\n- Check related reports for patterns\n- Always provide detailed reasons\n- Export audit trail regularly for compliance\n- Review statistics to identify trends\n\n---\n\n## ‚úÖ Checklist for Deployment\n\n- [ ] Database tables created (community_reports, moderation_actions)\n- [ ] community_dreams table updated (status, report_count columns)\n- [ ] Admin user role configured\n- [ ] VITE_APP_SALT set (optional but recommended)\n- [ ] Components imported in main.tsx\n- [ ] Routes configured\n- [ ] AdminSidebar updated with moderation links\n- [ ] Test report submission works\n- [ ] Test admin queue loads\n- [ ] Test moderation action saves to audit trail\n- [ ] Verify reporter anonymity (hash only)\n- [ ] CSV export works for audit trail\n\n---\n\n**System Status: ‚úÖ FULLY OPERATIONAL**\n\nThe moderation system is ready for production use!\n"}